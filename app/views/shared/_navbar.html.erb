<nav class="nav">
  <div class="container mx-auto px-4 py-2">
    <div class="flex items-center justify-between min-w-0">
      <div id="LSAlogo" class="flex items-center shrink min-w-0 overflow-hidden">
        <%= link_to root_path, class: "mr-2 shrink-0" do %>
          <%= image_tag 'LSA_Logo.svg', alt: 'LSA Logo', class: 'h-[1.03rem] w-[3.125rem] sm:h-[1.546rem] sm:w-[4.6875rem] lg:h-[49.47px] lg:w-[150px] lg:max-w-none lg:shrink-0' %>
        <% end %>
        <%= link_to root_path, class: "logo-title min-w-0" do %>
          Student Visit
        <% end %>
      </div>

      <% if authenticated? && Current.user %>
        <div class="relative block shrink-0" data-controller="dropdown">
          <button type="button"
                  class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-600 text-white font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                  data-action="click->dropdown#toggle"
                  aria-label="User menu">
            <%= user_initials(Current.user) %>
          </button>

          <div class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200"
               data-dropdown-target="menu">
            <div class="px-4 py-2 border-b border-gray-200">
              <p class="text-sm font-medium text-gray-900"><%= user_display_name(Current.user) %></p>
              <div class="mt-1">
                <% if Current.user.super_admin? %>
                  <span class="inline-block px-2 py-0.5 text-xs font-semibold uppercase rounded bg-red-600 text-white">Super Admin</span>
                <% elsif Current.user.department_admin? %>
                  <span class="inline-block px-2 py-0.5 text-xs font-semibold uppercase rounded" style="background-color: #FFCB05; color: black;">Department Admin</span>
                <% elsif Current.user.student? %>
                  <span class="inline-block px-2 py-0.5 text-xs font-semibold uppercase rounded" style="background-color: #00274C; color: #FFCB05;">Student</span>
                <% end %>
              </div>
              <p class="text-xs text-gray-500 mt-1"><%= Current.user.email_address %></p>
            </div>
            <div class="py-1">
              <% if Current.user.super_admin? %>
                <%= link_to "Page Content", admin_page_contents_path,
                    class: "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" %>
              <% end %>
            </div>
            <div class="py-1 border-t border-gray-200">
              <%= button_to "Sign out", session_path, method: :delete,
                  class: "w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 border-0 bg-transparent cursor-pointer",
                  form: { class: "inline" } %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</nav>
