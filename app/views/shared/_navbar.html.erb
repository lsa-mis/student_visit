<nav class="nav">
  <div class="container mx-auto px-4 py-2">
    <div class="flex items-center justify-between">
      <div id="LSAlogo" class="flex items-center shrink">
        <%= link_to root_path, class: "mr-2" do %>
          <%= image_tag 'LSA_Logo.svg', alt: 'LSA Logo', class: 'h-[3.09213rem] w-[9.375rem]' %>
        <% end %>
        <%= link_to root_path, class: "logo-title" do %>
          Student Visit
        <% end %>
      </div>

      <% if authenticated? && Current.user %>
        <div class="relative" data-controller="dropdown">
          <button type="button"
                  class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-600 text-white font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                  data-action="click->dropdown#toggle"
                  aria-label="User menu">
            <%= user_initials(Current.user) %>
          </button>

          <div class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200"
               data-dropdown-target="menu">
            <div class="px-4 py-2 border-b border-gray-200">
              <p class="text-sm font-medium text-gray-900"><%= user_display_name(Current.user) %></p>
              <p class="text-xs text-gray-500"><%= Current.user.email_address %></p>
            </div>
            <div class="py-1">
              <% if Current.user.super_admin? %>
                <span class="block px-4 py-2 text-xs font-semibold text-gray-500 uppercase">Super Admin</span>
              <% elsif Current.user.department_admin? %>
                <span class="block px-4 py-2 text-xs font-semibold text-gray-500 uppercase">Department Admin</span>
              <% elsif Current.user.student? %>
                <span class="block px-4 py-2 text-xs font-semibold text-gray-500 uppercase">Student</span>
              <% end %>
            </div>
            <div class="py-1 border-t border-gray-200">
              <%= button_to "Sign out", session_path, method: :delete,
                  class: "w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 border-0 bg-transparent cursor-pointer",
                  form: { class: "inline" } %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</nav>
